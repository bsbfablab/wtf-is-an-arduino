Encontro #4
===========

=Proposta=
Temporização
Interrupções
Exemplo: Semáforo

=Planejamento=

- Atualizar arquivos do curso

- Relembrando a aula passada e tirar dúvidas sobre o dever

- Conceito: Semáforo

Sinal de carros e pedestres
Tempo de trava para deixar o trânsito fluir
Sinal vermelho pros dois lados para impedir acidentes

- Montar o circuito

LED: 3,4,5,6,7
Buttons: 2

- Testar circuito: lesson4_1_TestSemaphoreCircuit

Programa que acende cada um dos LEDs após apertarmos um botão

- Lógica: Máquina de estados

                Carros    Pedestres             Próximo Estado (cond)
                -------   ---------             ---------------------
  * Estado 0:   VERDE     VERMELHO              1 botão && (t > t0)
  * Estado 1:   AMARELO   VERMELHO              2 (t > t1)
  * Estado 2:   VERMELHO  VERMELHO              3 (t > t2)
  * Estado 3:   VERMELHO  VERDE                 4 (t > t3)
  * Estado 4:   VERMELHO  VERMELHO (piscando)   5 (t > t4)

Trabalhar a lógica do problema com a turma
Apresentar a idéia da máquina de estados
Mostrar como implementar usando switch/case

- Testar máquina de estados: lesson4_2_TestStateMachine

Programa que muda de estado apertando botão

- Funções: nomes curtos para coisas repetitivas

Explicar a estrutura de uma função
Explicar como funciona o escopo de uma variável

- Testar função: lesson4_3_TestOutputFunctions

Programa que muda de estado apertando botão, mas acendendo as luzes certas

- Interrupção externa: interatividade sem tomar todo o tempo

Como funciona attachInterrupt
Variável para saber se botão foi pressionado ou não
Quando usar e cuidados com interrupção

- Testar interrupção: lesson4_4_TestButtonInterrupt

Programa que usa interrupção externa para interrupção (observar interrupção logo após ativação)

- Temporização: como fazer as coisas mudarem com o tempo sem dar delay

Como funciona a função millis()
Função isStateTimeDone()

- Testar temporização: lesson4_5_TestTiming

Programa que troca de estado segundo temporização

- Blink: adicionando o alerta ao pedestre

Como usar mais uma variável de estado, laços de repetição e temporização para um blink independente

- Testar blink: lesson4_6_TestBlink

Programa que reage troca de estado segundo temporização e faz blink na última transição

- Testar tudo: lesson4_7_Semaphore
